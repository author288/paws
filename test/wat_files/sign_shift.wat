(module
  (start $main)
  (memory 1)
  (global $g0 (export "g0") (mut i32) (i32.const 69312))
  (global $g1 (export "g1") (mut i32) (i32.const -621))
 (global $g2  (export "g2") (mut i32) (i32.const 11))
 (func $shift (param $i i32)(param $j i32)(result i32)
    (local.get $i)(local.get $j)(i32.shl)
  )
  (func $main
    (i32.const 12)
    (i32.const 0)(i32.const 1) 
    (i32.const 20)(i32.const 0) (i32.const 10) (i32.store)
    (call $calc) 
    (global.set $g0) (global.set $g1)
    (i32.const 0)(i32.load)(global.set $g2)
  )

  (func $calc (param $op i32)(param $a i32)(param $b i32)(result i32)
    (local $c i32) (i32.const 0)(i32.load)(local.set $c)
	(if (result i32)
    	(i32.eqz (local.get $op)) 
        (then (global.get $g1)(global.get $g2)
           (if(param i32)(param i32)(result i32)(i32.eqz (local.get $a))
		    (then (i32.div_s)(i32.const 3)(i32.shr_s))
            (else (i32.rem_s)(i32.const 10)(i32.rotr))
           ) 
        )
      	(else (global.get $g1)(global.get $g2)(call $shift)  
          )
    ) 
  )
)